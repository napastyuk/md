**Нормальная форма** - это требования, которые обеспечивают
1.  **Минимизация избыточности данных**: Повторяющиеся данные должны быть удалены.
2.  **Избежание аномалий**: Удаление данных должно быть простым и безопасным


## Первая нормальная форма

Требования:
1. Каждая ячейка таблицы может хранить только одно значение
2. Все данные в одной колонке могут быть только одного типа
3. Каждая запись в таблице должна однозначно отличаться от других записей

Что делаем чтобы выполнить требования:
   1. Проверяем что в ячейках нет перечислений. Если есть перечисления дублируем строки, чтобы в одной ячейке хранилась только одна запись. Либо если дублей много выносим в отдельную таблицу , со связью через id.
   2. Проверяем что все данные в столбце одного типа и этот тип соответствует типу столбца. 
   3. Добавляем первичный ключ.

## Вторая нормальная форма

Требования
1. Таблица должна быть в первой нормальной форме
2. Все неключевые атрибуты (столбцы, которые не являются частью первичного ключа) таблицы должны зависеть от первичного ключа

**2NF** фокусируется на удалении частичных зависимостей от первичного ключа.  То есть в отдельные таблицы выносится то что напрямую не относится к **первичному**  ключу. 

## Третья нормальная форма

Требования
1. Таблица должна быть во второй нормальной форме
2. Все неключевые атрибуты зависят только от первичного ключа и не имеют **транзитивных зависимостей**. Это значит, что неключевые атрибуты не должны зависеть от других неключевых атрибутов
**Транзитивная зависимость** возникает, когда один неключевой атрибут зависит от другого неключевого атрибута, а тот в свою очередь зависит от первичного ключа

**3NF** фокусируется на удалении транзитивных зависимостей между неключевыми атрибутами. То есть в отдельные таблицы выносятся вообще все разные сущности. 

Создание связей между таблицами
```sql
CREATE TABLE orders (
    id bigint PRIMARY KEY,
    -- Тип данных внешнего ключа должен быть такой же,
    -- как у первичного в той таблице, куда ссылается внешний
    user_id bigint REFERENCES users (id),
);
```
После связи через внешний ключ БД будет следить что при удалении, данные все еще консистентные. 


## Остальные нормальные формы

|Нормальная форма|Что устраняет?|
|---|---|
|**1NF**|Неатомарные данные (массивы, повторяющиеся группы).|
|**2NF**|Частичные зависимости (ключи зависят от части составного ключа).|
|**3NF**|Транзитивные зависимости (атрибуты зависят друг от друга, а не от ключа).|
|**BCNF**|Детерминанты, которые не являются суперключами.|
|**4NF**|Многозначные зависимости (когда один атрибут не влияет на другой).|
|**5NF**|Проблемы разбиения и восстановления данных.|
|**6NF**|Исторические данные и временные зависимости.|

#php/db #computer-science