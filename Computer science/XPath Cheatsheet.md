---
aliases:
  - Икспас шпаргалка
Источник: https://devhints.io/xpath
tags:
  - тестирование
  - автоматизация
  - автоматическое_тестирование
  - локаторы
  - селекторы
---

`XPath / XML Path Language` - это декларативный язык запросов к `XML`.  `HTML` документ тоже является `XML`.  Позже, в спецификации W3C,  `Xpath` был расширен до языка манипулирования `XML` и назван `XQuery`.  Применительно к тестированию `Xpath` - это путь к одному или нескольким элементам.   Важно что наибольшее распространение получил Xpath версии 1.0  Есть версии Xpath 2.0 и 3.0 который добавляют поддержку regexp и js вставок. 

## Синтаксис

В общем виде xpath это выражение `AxisStep` повторённое любое число раз.  
`Axes` - (ось) - в терминах xpath , способ навигации относительно текущего элемента по дереву. По сути определяет в какую сторону искать по дереву: по потомкам, по родителям или другим способом. Если это первое выражение, текущий узел это корень документа
`Step` - (шаг) - выборка среди элементов определённых  `Axes`. Его синтаксис почти повторяет css - селектор 
```xml
tagName[@attribute='value']
```
`tagName` - имя тега
`attribute` - имя атрибута
`value` - значение атрибута

`XPath` выражения могут склеиваться в цепочку. Первое выражение ищет всегда от корня элемента, а если к нему дописать второе выражение то оно будет искать относительно элементов найденных первым элементом.  В терминах xpath результаты первого выражения становятся `контекстом` для второго.   

## Оси/Axes
| Полная запись | Сокращённая запись | CSS аналог | Что означает |
| ---- | ---- | ---- | ---- |
| `/descendant-or-self::node()/` | `//` |  | Искать среди дочерних рекурсивно те дети, дети детей и тд. |
| `/child::node()/` | `/` |  | Искать только среди непосредсвенных дочерних узлов |
| `self::` | . |  | Указывает на контекст. Искать относительно текущего узла |
|  | `./` |  | Искать относительно корня И если он текущий узел |
|  | `.//` |  | Искать где угодно, но начинать относительно текущего элемента |
| `parent::` | `..` |  | Искать в родительских узлах контекста (непосредственных родителей) |
| `ancestor` |  |  | искать среди предков начиная с родительского и заканчивая корнем |
| `ancestor-or-self` |  |  | тоже что и ancestor, только включая сам узел |
| `attribute` | `@` | `[attr]` | поиск только среди атрибутов |
| `child` |  | `>` | поиск только среди детей(непосредственных потомков). Подставляется по умолчанию если не указано иное. |
| `descendant::` |  | пробел | Поиск среди все потомков контекста(детей, детей детей и тд рекурсивно) |
| `descendant-or-self::` |  |  | Тоже только включая сам элемент |
| `following` |  | `+` или `~` | см схему |
| `following-sibling` |  |  | см схему |
| `preceding` |  |  | см схему |
| `preceding-sibling	` |  |  | см схему |
![[Pasted image 20231227195623.png]]


## Steps

Еще примеры
````xml
//*  - все элементы

````



## Ссылки: 
http://xpather.com/ - удобная песочница