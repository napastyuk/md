## Модульные тесты для бэкенда

**card_number**
- проверка что символов ровно 16
- проверка на любые символы кроме цифр в том числе пробел и дефис
- проверка на пустую строку и null

**card_holder**
- строка содержит только латинские буквы и один пробел
- Нет пробела
- больше одного пробела
- длинна строки больше 256 символов
- проверка на пустую строку и null

**card_expiration**
- строка соответствует формату MM/ГГ (регуляркой `/^(0[1-9]|1[0-2])\/\d{2}$/`)
- проверка на истёкшую дату
- проверка на пустую строку или null

**cvv**
- соответствие формату `/^\d{3}$/`
- проверка на пустую строку или null

**order_number**
- больше 16 символов в строке
- проверка на пробел в строке
- проверка на пустую строку или Null
- проверка что такой номер присутствует в базе

**sum**
- проверка формата `/^\d+,\d{2}$/` Разрешены только цифры и одна запятая, после запятой только два разряда(копейки). Запись копеек обязательная 
- проверка что нету других символы кроме разрешенных будет регуляркой
- проверка что сумме не 0,00
- проверка на пустую строку или null

Во всех случаях если проверки не пройдены то на фронте подсвечиваем соответствующее поле ввода красным и выводим сообщение "неверный формат введённых данных"

## Интеграционные тесты
1. Проверка бэка
- если входные данные не соответствуют формату(проверка данных по регуляркам) - >  на фронт 400. А соответствующее поле подсвечивается красным
2. Проверка сервиса А
- Недостаточно средств - > Сервис A возвращает ошибку и бэк пробрасывает ошибку на фронт 
- Карта заблокирована - > Сервис A возвращает ошибку и бэк пробрасывает ошибку на фронт
- Ошибка сети / таймаут от Сервиса A → бэк пробрасывает ошибку на фронт
3. Проверка Репозитория
- Номер заказа и/или сумма из сервиса А не совпадают с значением в базе
- Пришел повторный номер заказа - > отклонить заказ, вернуть деньги если списались, сообщение на фронт о ошибке. 
- проверка недоступности БД - > на фронт 500 ошибку

## Системные тесты

1. Проверка успешного пути.
- правильно введённые на фронте данные
- корректный запрос от фронта к бэку
- бэк шлёт запрос в сервис А
- сервис А шлёт 200 в Репозиторий
- метод setOrderIsPaid подтверждает заказ
- репозиторий шлёт 200 на бэк, а тот на фронт
- на фронте появляется сообщение об успешной оплате
2. Проверка что сервис отклоняет платёж и на фронт приходит ошибка при
- Недостаточном кол-ве денег на карте
- Карта заблокирована
- Карта недействительна
3. Если сервис А вернул успешную оплату а заказа в базе не нашлось, оплата должна корректно отменится с сообщением на фронт
4. Если не отвечает по таймауту один из компонентов бэка(платёжный сервис, репозиторий, БД, сервер целиком) то на фронт сообщение о временной технической неисправности и просьбе попытаться позже
Некорректный ввод пользователя на фронте не тестируем т к стоит задача протестировать именно бэк

Для удешевления тестирования можно подключить тестовый баланс в платёжном сервисе и/или добавить скрытый товар за один рубль. 