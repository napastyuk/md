
Расчет доходности по портфелю целиком:
Все вводы USDT сравниваем с текущей стоимостью портфеля

--------

Расчет доходности по конкретной валюте (на примере SOL)
Из общей истории фильтруем все транзакции вида:
USDT->SOL
USDT->SOL
USDT->SOL
Потом суммируем по столбцам
```
(USDT + USDT + USDT)
--------------------  = Среднее значение цены за один SOL за весь период инвестиций (СР.ЗН.Ц.SOL)  
(SOL + SOL + SOl)
```

Потом
```
СР.ЗН.Ц.SOL * Количество SOL у нас в портфеле прямо сейчас = СРЕДНЯЯ ЦЕНА ПО КОТОРОЙ МЫ ПОКУПАЛИ SOL (СР.Ц. SOL)
```

Потом сравниваем
`СР.Ц. SOL`  и курс SOL прямо сейчас (КУРС SOL)  -> Это и будет наша доходность в SOL
3 варианта
1. `СР.Ц. SOL` < `КУРС SOL`  - мы в просадке на сумму `СР.Ц. SOL` минус `КУРС SOL`. Если мы продаем валюту сейчас значит мы фиксируем убыток. 
2. `СР.Ц. SOL` = `КУРС SOL`  - курс не изменился. Даже если мы покупали по разным ценам, она усреднилась до текущей, т е мы не заработали , но и не потеряли.
3. `СР.Ц. SOL` > `КУРС SOL`  - мы в плюсе на сумму `СР.Ц. SOL` минус `КУРС SOL`. Разница цен и есть наш доход за счёт удачной точки входа и/или росте валюты. Если мы продаем сейчас то фиксируем доход.

Теоретически продажа валюты возможна еще в третьи валюты, тогда цепочка усложняется. Подумать об этом потом. 

--------

Пример расчёта этого же параметра, но в процентах. 
Скорее всего это то что в интерфейсе OKX показывается как PnL
```
Допустим 
курс: 200
ср. зн.: 125
тогда

200
--- - 1 * 100% = 60% доходности
125 

100
--- - 1 * 100 = -20% убытка
125
```



